name: Push to SEO

on: 
  workflow_dispatch:
  schedule:
    - cron:  '0 0 * * *' 

jobs:
  push_to_seo:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5 
      with:
        python-version: '3.12' 
        cache: 'pip' # caching pip dependencies
    - run: |
        pip install -r etc/requirements.txt
    steps:
      - name: push to baidu
        shell: pwsh
        run: |
          Invoke-WebRequest -Uri ${{ secrets.SITEMAP_URL }} -Outfile ./sitemap.txt
          python python/push_to_baidu.py -./sitemap.txt ${{ secrets.BAIDU_SEO_TOKEN }}